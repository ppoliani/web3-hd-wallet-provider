!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("bindings"),require("websocket")):"function"==typeof define&&define.amd?define("web3-hd-wallet-provider",["bindings","websocket"],t):"object"==typeof exports?exports["web3-hd-wallet-provider"]=t(require("bindings"),require("websocket")):e["web3-hd-wallet-provider"]=t(e.bindings,e.websocket)}(global,function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=158)}({103:function(e,t){e.exports=require("os")},107:function(e,t){e.exports=require("events")},148:function(e,n){e.exports=t},158:function(e,t,n){"use strict";n.r(t);var r=n(85),i=n.n(r),o=n(81),s=n.n(o),a=n(144),u=n.n(a),d=n(145),c=n.n(d),f=n(146),l=n.n(f),p=n(86),h=n.n(p),v=n(147),g=n.n(v),y=n(87),b=n.n(y),w=n(157),x=n(36),m=n.n(x),P=n(18),j=n.n(P);function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=new h.a,S=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=r.address_index,d=void 0===a?0:a,f=r.num_addresses,p=void 0===f?1:f,v=r.shareNonce,y=void 0===v||v,x=r.wallet_hdpath,P=void 0===x?"m/44'/60'/0'/0/":x,q=r.http_headers;this.hdwallet,this.wallet_hdpath=P,this.http_headers=q,this.wallets={},this.addresses=[],this.engine=new c.a;var S=function(e){return Array.isArray(e)?e:!(!e||e.includes(" "))&&[e]}(t);S?function(e){for(var t=d;t<d+p;t++){var n=Buffer.from(e[t].replace("0x",""),"hex");if(j.a.isValidPrivate(n)){var r=s.a.fromPrivateKey(n),i=r.getAddressString();o.addresses.push(i),o.wallets[i]=r}}}(S):function(e){if(o.hdwallet=u.a.fromMasterSeed(i.a.mnemonicToSeed(e)),!i.a.validateMnemonic(e))throw new Error("Mnemonic invalid or undefined");for(var t=d;t<d+p;t++){var n=o.hdwallet.derivePath(o.wallet_hdpath+t).getWallet(),r="0x".concat(n.getAddress().toString("hex"));o.addresses.push(r),o.wallets[r]=n}}(t);var _=this.addresses,k=this.wallets;this.engine.addProvider(new g.a({getAccounts:function(e){e(null,_)},getPrivateKey:function(e,t){if(!k[e])return t("Account not found");t(null,k[e].getPrivateKey().toString("hex"))},signTransaction:function(e,t){var n,r=e.from.toLowerCase();k[r]?n=k[r].getPrivateKey():t("Account not found");var i=new m.a(e);i.sign(n),t(null,"0x".concat(i.serialize().toString("hex")))},signMessage:function(e,t){var n=e.data,r=e.from,i=n;i||t("No data to sign"),k[r]||t("Account not found");var o=k[r].getPrivateKey(),s=j.a.toBuffer(i),a=j.a.hashPersonalMessage(s),u=j.a.ecsign(a,o);t(null,j.a.toRpcSig(u.v,u.r,u.s))},signPersonalMessage:function(){this.signMessage.apply(this,arguments)}})),y?this.engine.addProvider(A):this.engine.addProvider(new h.a),this.engine.addProvider(new l.a),"string"==typeof n?this.engine.addProvider(new b.a(new w.a.providers.HttpProvider(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){O(e,t,n[t])})}return e}({keepAlive:!1},this.http_headers)))):this.engine.addProvider(new b.a(n)),this.engine.start()}var t,n,r;return t=e,(n=[{key:"sendAsync",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.engine.sendAsync.apply(this.engine,t)}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.engine.send.apply(this.engine,t)}},{key:"getAddress",value:function(e){return debug("getting addresses",this.addresses[0],e),e?this.addresses[e]:this.addresses[0]}},{key:"getAddresses",value:function(){return this.addresses}}])&&q(t.prototype,n),r&&q(t,r),e}();t.default=S},19:function(e,t){e.exports=require("util")},273:function(e,t){e.exports=require("url")},32:function(e,t){e.exports=require("assert")},380:function(e,t){e.exports=require("punycode")},40:function(e,t){e.exports=require("buffer")},8:function(e,t){e.exports=require("crypto")},82:function(e,t){e.exports=require("http")},83:function(e,t){e.exports=require("https")},94:function(e,t){e.exports=require("stream")},95:function(t,n){t.exports=e}})});
//# sourceMappingURL=index.js.map